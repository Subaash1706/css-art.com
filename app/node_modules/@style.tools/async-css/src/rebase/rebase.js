/**
 * Async CSS loader - github.com/style-tools/async-css
 * Released under the terms of MIT license
 *
 * Copyright (C) 2018 github.com/style-tools
 */

// <a>
var A = CREATE_ELEMENT(VAR_A);
var ABSOLUTE_REGEX = /^(([a-z]+)?:)?\//i; // absolute URL: xxx:/ or :/ or /

REBASE = function(args, callback) {
    var asset = args[0],
        options = args[1],
        src = args[2],
        base = asset[VAR_BASE] || options[VAR_BASE]; // base from asset or global options

    // detect relative URL
    if (base && !ABSOLUTE_REGEX.test(src)) {
        attrs = {};
        attrs[VAR_HREF] = base + src; // simple concatenation, can be used for smart rebase compression
        console.log(base, base + src, CLONE_ELEMENT(A, attrs).href);
        callback(CLONE_ELEMENT(A, attrs).href);
    }
}