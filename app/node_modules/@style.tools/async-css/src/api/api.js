/**
 * üìê Style.Tools
 * 
 * Async CSS loader - github.com/style-tools/async-css
 * Released under the terms of MIT license
 *
 * Copyright (C) 2018 github.com/style-tools
 */

API = 1;

var _methods = [
        [VAR_LOAD, ],
        [VAR_ON, ON],
        [VAR_ONCE, ONCE],
        [VAR_OFF, OFF]
    ],
    _method, _fn, _load;

// assign public methods
FOREACH(_methods, function(method) {
    _method = VAR(method[0]);
    _fn = method[1];
    _load = method[0] === VAR_LOAD;

    // CSS loader
    if (LOAD_CSS) {
        asyncCSS[_method] = function() {
            APPLY(_load ? asyncCSS : _fn, arguments);
            return asyncCSS;
        };
    }

    // script loader
    if (LOAD_JS) {
        asyncJS[_method] = function() {
            APPLY(_load ? asyncJS : _fn, arguments);
            return asyncJS;
        };
    }
});

ERROR = function(type, msg) {

    // emit error
    EMIT(VAR_ERROR, type, msg);
}