/**
 * Async CSS loader - github.com/style-tools/async-css
 * Released under the terms of MIT license
 *
 * Copyright (C) 2018 github.com/style-tools
 */

var OBSERVER;
_mutationObserver = VENDOR_FN('MutationObserver');

// setup capture
CAPTURE_OBSERVER = function(observer, _capture) {

    if (observer && _mutationObserver) {

        // setup Observer
        OBSERVER = new _mutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                for (var i = 0; i < mutation.addedNodes.length; i++) {
                    _capture(mutation.addedNodes[i])
                }
            });
        });

        OBSERVER.observe(doc.documentElement, {
            attributes: false,
            childList: true,
            subtree: true,
            characterData: false
        });

        if (DEBUG) {
            CONSOLE_INFO('capture', 'observer setup');
        }
    }

}