{
    "id": "https://style.tools/json-schemas/js-loader.json",
    "$schema": "http://json-schema.org/draft-07/schema#",
    "description": "Schema for üìê Style.Tools Javascript Loader Configuration.",
    "type": "object",
    "properties": {
        "load": {
            "description": "Javascript Loader configuration.",
            "oneOf": [{
                "description": "A script URL.",
                "type": "string",
                "minLength": 1
            }, {
                "type": "array",
                "minItems": 1,
                "items": {
                    "oneOf": [{
                        "description": "A script URL.",
                        "type": "string",
                        "minLength": 1
                    }, {
                        "type": "object",
                        "properties": {
                            "ref": {
                                "description": "A reference name for the script. Can be used for dependency matching and is added as DOM-element reference.",
                                "type": "string"
                            },
                            "src": {
                                "description": "A script URL.",
                                "type": "string",
                                "minLength": 1
                            },
                            "defer": {
                                "description": "Use defer instead of async (load script on domready).",
                                "type": "boolean"
                            },
                            "attributes": {
                                "description": "HTML element attributes to add to the script element.",
                                "type": "object",
                                "additionalProperties": {
                                    "type": "string"
                                }
                            },
                            "target": {
                                "description": "CSS selector for a target DOM element to insert scripts.",
                                "$ref": "#/definitions/target"
                            },
                            "load_timing": {
                                "description": "Download timing configuration.",
                                "$ref": "timing.json#/definitions/timing_config"
                            },
                            "exec_timing": {
                                "description": "Script execution timing configuration.",
                                "$ref": "timing.json#/definitions/timing_config"
                            },
                            "cache": {
                                "description": "Cache configuration.",
                                "$ref": "cache.json#/definitions/cache_config"
                            },
                            "dependencies": {
                                "$ref": "dependency.json#/definitions/dependencies"
                            }
                        },
                        "required": ["href"],
                        "additionalProperties": false
                    }]
                },
                "uniqueItems": true
            }]
        },
        "load_options": {
            "description": "Javascript Loader global options configuration.",
            "type": "object",
            "properties": {
                "attributes": {
                    "description": "HTML element attributes to add to the script element.",
                    "type": "object",
                    "additionalProperties": {
                        "type": "string"
                    }
                },
                "defer": {
                    "description": "Use defer by default instead of async (load script on domready).",
                    "type": "boolean"
                },
                "target": {
                    "description": "CSS selector for a target DOM element to insert scripts.",
                    "$ref": "#/definitions/target"
                },
                "load_timing": {
                    "description": "Download timing configuration.",
                    "$ref": "timing.json#/definitions/timing_config"
                },
                "exec_timing": {
                    "description": "Script execution timing configuration.",
                    "$ref": "timing.json#/definitions/timing_config"
                },
                "cache": {
                    "description": "Cache configuration.",
                    "$ref": "cache.json#/definitions/cache_config"
                }
            },
            "additionalProperties": false
        },
        "capture": {
            "$ref": "capture.json#/definitions/capture"
        },
        "capture_options": {
            "$ref": "capture.json#/definitions/capture_options"
        },
        "additionalProperties": false
    },

    "definitions": {
        "target": {
            "description": "CSS selector for a target DOM element to insert scripts.",
            "oneOf": [{
                "type": "boolean",
                "enum": [false]
            }, {
                "type": "string",
                "minLength": 1
            }, {
                "description": "Insert before target DOM element.",
                "type": "object",
                "properties": {
                    "before": {
                        "type": "string",
                        "minLength": 1
                    }
                },
                "required": ["before"],
                "additionalProperties": false
            }, {
                "description": "Insert after target DOM element.",
                "type": "object",
                "properties": {
                    "after": {
                        "type": "string",
                        "minLength": 1
                    }
                },
                "required": ["after"],
                "additionalProperties": false
            }]
        }
    }
}